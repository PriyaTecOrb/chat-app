<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h2 class="mb-0">New Conversation</h2>
      </div>
      
      <div class="card-body">
        <%= form_with model: @conversation, url: conversations_path, method: :post, data: { turbo: false } do |f| %>
          <%= f.hidden_field :conversation_type, value: :group_chat %>
          
          <div class="mb-3">
            <%= f.label :title, "Group Name", class: "form-label" %>
            <%= f.text_field :title, class: "form-control", required: true %>
          </div>
          
          <div class="mb-3">
            <label for="user-select" class="form-label">Add Members</label>
            <select id="user-select" name="conversation[user_ids][]" multiple class="form-select">
              <% @users.each do |user| %>
                <option value="<%= user.id %>"><%= user.username %></option>
              <% end %>
            </select>
          </div>
          
          <div class="d-grid">
            <%= f.submit "Create Group", class: "btn btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('turbo:load', function() {
		new SlimSelect({
			select: '#user-select',
			settings: {
				placeholderText: 'Select members...',
				searchPlaceholder: 'Search users...',
				searchText: 'No results',
				searchingText: 'Searching...',
				closeOnSelect: false
			}
		});
	});
</script>